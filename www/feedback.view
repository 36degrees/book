<!doctype html>
<html>
<link rel="stylesheet" href="/book.css" />
<link rel="stylesheet" href="/feedback.css" />
<script src="/entries.js"></script>
<title>Feedback | Web Browser Engineering</title>
<body id="feedback">

%if new:
<section id='new'>
  <header>
    <h1>New Feedback</h1>
  </header>
  %for obj in new:
  %if obj['status'] == 'new':
    <div class="{{obj['type']}}" data-id="{{obj['id']}}">
    <button type='button' class='saved'>Save</button>
    <button type='button' class='denied'>Deny</button>
    <h1>{{obj.get('name', "anon")}} in <code>{{obj['url']}}</code>:</h1>
    %if obj['type'] == 'typo':
      <blockquote>{{!obj['diff']}}</blockquote>
    %else:
      <blockquote>{{obj['text']}}</blockquote>
      <p>{{obj['comment']}}</p>
    %end
    </div>
  %end
  %end
</section>
%end

%if saved:
<section>
  <header>
    <h1>Saved Feedback</h1>
  </header>
  %for obj in saved:
  %if obj['status'] == 'saved':
    <div class="{{obj['type']}}" data-id="{{obj['id']}}">
    <button type='button' class='archived'>Archive</button>
    <h1>{{obj.get('name', "anon")}} in <code>{{obj['url']}}</code>:</h1>
    %if obj['type'] == 'typo':
      <blockquote>{{!obj['diff']}}</blockquote>
    %else:
      <blockquote>{{obj['text']}}</blockquote>
      <p>{{obj['comment']}}</p>
    %end
    </div>
  %end
  %end
</section>
%end

%if not new and not saved:
<p>All feedback handled!</p>
%end

</body>
</html>
